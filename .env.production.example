# =============================================================================
# TMS PRODUCTION ENVIRONMENT CONFIGURATION - EXAMPLE
# =============================================================================
# INSTRUCTIONS: 
# 1. Copy this file to .env.production
# 2. Replace all CHANGE_ME values with your actual production values
# 3. NEVER commit .env.production to git - only this example file!

# =============================================================================
# DATABASE CONFIGURATION (PÃ…KREVD)
# =============================================================================
DATABASE_URL="postgresql://tms_prod_user:CHANGE_ME_STRONG_PASSWORD@localhost:5432/tms_production"

# Database Connection Pooling - Production Settings
DATABASE_MAX_CONNECTIONS="25"
DATABASE_MIN_CONNECTIONS="5"
DATABASE_CONNECTION_TIMEOUT="5000"
DATABASE_IDLE_TIMEOUT="180000"
DATABASE_MAX_LIFETIME="1800000"
DATABASE_QUERY_TIMEOUT="15000"
DATABASE_RETRY_ATTEMPTS="5"
DATABASE_RECONNECT_INTERVAL="5000"

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
NODE_ENV="production"
PORT="4000"
HOST="0.0.0.0"

# Application URLs
APP_URL="https://yourdomain.com"
API_URL="https://api.yourdomain.com"
CLIENT_URL="https://yourdomain.com"
ADMIN_URL="https://admin.yourdomain.com"

# =============================================================================
# SECURITY CONFIGURATION (KRITISK - ENDRE ALLE!)
# =============================================================================
JWT_SECRET="CHANGE_ME_VERY_STRONG_JWT_SECRET_AT_LEAST_64_CHARACTERS_LONG"
JWT_REFRESH_SECRET="CHANGE_ME_DIFFERENT_REFRESH_SECRET_ALSO_64_CHARACTERS"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_EXPIRES_IN="7d"

# Encryption keys
ENCRYPTION_KEY="CHANGE_ME_32_CHARACTER_ENCRYPTION_KEY"
BCRYPT_ROUNDS="12"

# Session configuration
SESSION_SECRET="CHANGE_ME_SESSION_SECRET_KEY"
SESSION_COOKIE_SECURE="true"
SESSION_COOKIE_HTTPONLY="true"
SESSION_COOKIE_MAXAGE="86400000"

# =============================================================================
# CORS & SECURITY HEADERS
# =============================================================================
CORS_ORIGIN="https://yourdomain.com,https://admin.yourdomain.com"
CORS_CREDENTIALS="true"
CORS_METHODS="GET,HEAD,PUT,PATCH,POST,DELETE"
CORS_ALLOWED_HEADERS="Content-Type,Authorization,X-Requested-With"

# Security headers
HSTS_MAX_AGE="31536000"
CSP_DIRECTIVES="default-src 'self'; script-src 'self' 'unsafe-inline'; style-src 'self' 'unsafe-inline'"

# =============================================================================
# RATE LIMITING & DDOS PROTECTION
# =============================================================================
RATE_LIMIT_WINDOW_MS="900000"
RATE_LIMIT_MAX_REQUESTS="100"
RATE_LIMIT_MESSAGE="Too many requests, please try again later"
LOGIN_RATE_LIMIT_WINDOW_MS="300000"
LOGIN_RATE_LIMIT_MAX_ATTEMPTS="5"

# =============================================================================
# SSL/TLS CONFIGURATION
# =============================================================================
SSL_CERT_PATH="/etc/ssl/certs/yourdomain.crt"
SSL_KEY_PATH="/etc/ssl/private/yourdomain.key"
SSL_CA_PATH="/etc/ssl/certs/ca-certificates.crt"
FORCE_HTTPS="true"

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================
SMTP_HOST="smtp.gmail.com"
SMTP_PORT="587"
SMTP_SECURE="false"
SMTP_USER="your-email@gmail.com"
SMTP_PASS="CHANGE_ME_SMTP_PASSWORD"
EMAIL_FROM="noreply@yourdomain.com"
EMAIL_FROM_NAME="TMS System"

# =============================================================================
# SMS CONFIGURATION (Twilio eller lignende)
# =============================================================================
SMS_PROVIDER="twilio"
TWILIO_ACCOUNT_SID="CHANGE_ME_TWILIO_SID"
TWILIO_AUTH_TOKEN="CHANGE_ME_TWILIO_TOKEN"
TWILIO_PHONE_NUMBER="+1234567890"

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL="redis://localhost:6379"
REDIS_PASSWORD="CHANGE_ME_REDIS_PASSWORD"
REDIS_DB="0"
REDIS_MAX_RETRIES="5"
REDIS_RETRY_DELAY_MS="1000"

# =============================================================================
# LOGGING & MONITORING
# =============================================================================
LOG_LEVEL="info"
LOG_FORMAT="json"
LOG_MAX_SIZE="100m"
LOG_MAX_FILES="30"
LOG_DATE_PATTERN="YYYY-MM-DD"
LOG_AUDIT_ENABLED="true"
LOG_PERFORMANCE_ENABLED="true"

# Sentry Error Monitoring
SENTRY_DSN="CHANGE_ME_SENTRY_DSN"
SENTRY_ENVIRONMENT="production"
SENTRY_RELEASE="1.0.0"

# Prometheus Metrics
PROMETHEUS_ENABLED="true"
PROMETHEUS_PORT="9090"
PROMETHEUS_METRICS_ENDPOINT="/metrics"

# =============================================================================
# FILE STORAGE & CDN
# =============================================================================
STORAGE_TYPE="local"
UPLOAD_MAX_SIZE="10485760"
UPLOAD_ALLOWED_TYPES="image/jpeg,image/png,image/gif,application/pdf"
UPLOAD_DIRECTORY="/app/uploads"

# AWS S3 (hvis brukt)
AWS_ACCESS_KEY_ID="CHANGE_ME_AWS_ACCESS_KEY"
AWS_SECRET_ACCESS_KEY="CHANGE_ME_AWS_SECRET_KEY"
AWS_REGION="eu-west-1"
AWS_S3_BUCKET="your-bucket-name"

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED="true"
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS="30"
BACKUP_DIRECTORY="/opt/tms/backups"
BACKUP_COMPRESS="true"

# =============================================================================
# MICROSERVICES CONFIGURATION
# =============================================================================
MICROSERVICES_ENABLED="true"
SERVICE_DISCOVERY_URL="http://consul:8500"
SERVICE_NAME="tms-api"
SERVICE_VERSION="1.0.0"

# Internal service URLs
USER_SERVICE_URL="http://user-service:3001"
NOTIFICATION_SERVICE_URL="http://notification-service:3002"
AUDIT_SERVICE_URL="http://audit-service:3003"

# =============================================================================
# HEALTH CHECKS & MONITORING
# =============================================================================
HEALTH_CHECK_ENABLED="true"
HEALTH_CHECK_ENDPOINT="/health"
HEALTH_CHECK_INTERVAL="30000"
HEALTH_CHECK_TIMEOUT="5000"

# Database health check
DB_HEALTH_CHECK_ENABLED="true"
DB_HEALTH_CHECK_TIMEOUT="3000"

# External service health checks
EXTERNAL_HEALTH_CHECKS="true"
EXTERNAL_HEALTH_CHECK_TIMEOUT="5000"

# =============================================================================
# PERFORMANCE & OPTIMIZATION
# =============================================================================
CACHE_ENABLED="true"
CACHE_TTL="3600"
CACHE_MAX_SIZE="1000"

# Response compression
COMPRESSION_ENABLED="true"
COMPRESSION_THRESHOLD="1024"
COMPRESSION_LEVEL="6"

# Static file serving
STATIC_FILE_CACHE_MAXAGE="86400000"
STATIC_FILE_ETAG="true"

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_REGISTRATION_ENABLED="true"
FEATURE_EMAIL_VERIFICATION="true"
FEATURE_SMS_VERIFICATION="false"
FEATURE_TWO_FACTOR_AUTH="true"
FEATURE_AUDIT_LOGGING="true"
FEATURE_RATE_LIMITING="true"

# =============================================================================
# TIMEZONE & LOCALIZATION
# =============================================================================
TZ="Europe/Oslo"
DEFAULT_LANGUAGE="no"
SUPPORTED_LANGUAGES="no,en"
DATE_FORMAT="DD.MM.YYYY"
TIME_FORMAT="HH:mm"

# =============================================================================
# DEVELOPMENT/DEBUG (DISABLE IN PRODUCTION!)
# =============================================================================
DEBUG="false"
VERBOSE_LOGGING="false"
STACK_TRACE_ENABLED="false"
PROFILING_ENABLED="false" 